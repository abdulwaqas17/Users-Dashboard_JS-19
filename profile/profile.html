<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- <link rel="stylesheet" href="profile.css"> -->
    <link rel="stylesheet" href="./../style.css">
</head>
<body>
    

    <div class="profile flex">

        
        <!-- dashboard left is here  -->
        <div class="dashboardLeft">

            <!-- company logo is here  -->
            <div class="logo">

                <h2>Tech Inn</h2>

            </div>

            <!-- links is here  -->
            <div class="links">

                
                <ul>
                    
                    <li onclick="showHome()" id="home"><a href="javascript:void(0)">Home</a></li>

                    <li onclick="showDashboard()" id="dashboard"><a href="javascript:void(0)" >Dashboard</a></li>

                    <li  onclick="showProfile()" id="profile"><a href="javascript:void(0)">Profile</a></li>

                    <li  id="services"><a href="./../services/service.html">Services</a></li>

                    <li  id="contact"><a href="./../contact/contact.html">Contact Us</a></li>


                </ul>

            </div>

        </div>


        <!-- dashboardRight is here  -->
        <div class="dashboardRight">

            <div class="profileRightContainer">

                <!-- dashboardRightHeader is here  -->
                <div class="dashboardRightHeader">

                    
                    <div class="profileRightHeaderNav flex">

                        <!-- dashboardRightHeaderHeading is here  -->
                        <h2 class="profileHeading">Profile</h2>
    
                        <!-- dashboardRightHeaderRightSide is here  -->
                         <div class="dashboardRightHeaderRightSide flex">
<!--     
                            <div class="dashboardRightHeaderSearch flex">
    
                                <span>@</span>
                                <input type="text" placeholder="Search">
    
                            </div> -->
    
                            <button class="profileTopButton" id="logoutBtn" onclick="logOut()">
    
                                Log Out
    
                            </button>
    
                            <button class="dashboardRightHeaderInOf flex">
    
                                <span> • • • </span>
    
                            </button>
    
    
    
                         </div>
                    </div>
    
                        <!-- dashboardRightHeaderUsers is here  -->
                    <!-- <div class="dashboardRightHeaderUsers">
    
                            <ul class="flex">
    
                                <li><a href="#">All Users 235</a></li>
    
                                <li><a href="#">Admins 35</a></li>
    
                                <li><a href="#">Managers 50</a></li>
    
                                <li><a href="#">Employes 150</a></li>
    
                            </ul>
                    </div> -->


                </div>


                <!-- profileSection is here  -->
                <div class="profileSection">


                    <!-- profileTop is here  -->
                    <div class="profileTop flex">

                        <!-- profilePhoto is here  -->
                        <div class="profilePhoto"></div>

                        <!-- profileName is here  -->
                        <div class="profileName">

                            <h3 id="h2UserName">Muhammad Waqas</h3>
                            <p id="pUserEmail">waqas123@gmail.com</p>
                            <p id="pUserRole">Admin</p>

                            
                        <button class="saveButton none" onclick="saveData()">
                             Save Changes
                        </button>

                        </div>

                    </div>

                    <!-- profileMid is here  -->
                    <div class="profileMid">

                        <h2>Personal Information</h2>
                        <button class="editButton" onclick="editData()">
                            <span><i class="fa-solid fa-pen"></i></span> Edit
                        </button>

                        <table id="personalInformation">

                            <tr>
                                
                                <td>User Name</td>
                                <td>Muhammad Waqas</td>

                            </tr>

                            <tr>

                                <td>User Email</td>
                                <td>Waqas123@gmail.com</td>

                            </tr>

                            <tr>

                                <td>User Birth Day</td>
                                <td>11 July 1996</td>

                            </tr>

                            <tr>

                                <td>User Phone No.</td>
                                <td>+920132466482</td>

                            </tr>

                        </table>

                    </div>

                    <!-- profileBottom is here  -->
                    <div class="profileBottom">

                        <h2>Address </h2>
                        <button class="editButton" onclick="editData()">
                            <span><i class="fa-solid fa-pen"></i></span> Edit
                        </button>

                        <table id="userAddress">

                            <tr>

                                <td>Country</td>
                                <td>Pakistan</td>
                                
                            </tr>

                            <tr>

                                <td>City</td>
                                <td>Karachi</td>

                            </tr>

                        </table>

                    </div>

                </div>

            </div>

        </div>

    </div>

    


    <script src="./../app.js"></script>

    <script>

        // get login email of current user from local Storage  
        var currentUserEmail = window.localStorage.getItem('lastLoginUserEmail'); 
        console.log(currentUserEmail);

        // get current all users from local Storage 
        var currentAllUsers = JSON.parse(window.localStorage.getItem('Users'));
        console.log(currentAllUsers);

        // get the obj of current user through its UNIQUE email 
        for (var i = 0; i < currentAllUsers.length; i++ ) {

            if (currentUserEmail == currentAllUsers[i].userEmail) {

                // current user data store in this variable 
                var currentUserData = currentAllUsers[i];
                var currentUserIndex = i; 
                console.log(currentUserData);
                break;

            }
        }

        console.log(currentUserData);
        console.log(currentUserIndex);

        function editData() {

            var uName = document.getElementById('input1');
            uName.disabled = false;
            var uEmail = document.getElementById('input2').disabled = false;
            var uBirthDay = document.getElementById('input3').disabled = false;
            var uPhone = document.getElementById('input4').disabled = false;
            var uCity = document.getElementById('input5').disabled = false;

            document.querySelector('.saveButton').classList.remove('none');

        }

        function saveData() {

            console.log('now');
            currentUserData.userName = document.getElementById('input1').value;
            currentUserData.userEmail = document.getElementById('input2').value;
            currentUserData.userBirthDay = document.getElementById('input3').value;
            currentUserData.userPhone = document.getElementById('input4').value;
            currentUserData.userCity = document.getElementById('input5').value;
            currentUserData.userPassword = currentUserData.userPassword;
            currentUserData.userRole = currentUserData.userRole;

            console.log('save');

            currentAllUsers.splice(currentUserIndex,1,currentUserData);

            alert('Your Changes Successfully changed, Refreash the page');

            window.localStorage.setItem('Users',JSON.stringify(currentAllUsers));

        }



        var h2UserName = document.getElementById('h2UserName');
        h2UserName.innerHTML = currentUserData.userName;

        var pUserEmail = document.getElementById('pUserEmail');
        pUserEmail.innerHTML = currentUserData.userEmail;

        var pUserRole = document.getElementById('pUserRole');
        pUserRole.innerHTML = currentUserData.userRole;

        var personalInformation = document.getElementById('personalInformation');
        personalInformation.innerHTML = `


<tr>
    
    <td>User Name</td>
    <td><input type="text" id='input1' value="${currentUserData.userName}" disabled></td>

</tr>

<tr>

    <td>User Email</td>
    <td><input type="text" id='input2' value="${currentUserData.userEmail}" disabled></td>

</tr>

<tr>

    <td>User Birth Day</td>
    <td><input type="text" id='input3' value="${currentUserData.userBirthDay}" disabled></td>

</tr>

<tr>

    <td>User Phone No.</td>
    <td><input type="text" id='input4' value="${currentUserData.userPhone}" disabled></td>

</tr>

        ` 

    var userAddress = document.getElementById('userAddress');
    userAddress.innerHTML = `

<tr>

<td>Country</td>
<td><input type="text" value="Pakistan" disabled></td>

</tr>

<tr>

<td>City</td>
<td><input type="text" id='input5' value="${currentUserData.userCity}" disabled></td>

</tr>
    
    `    
function logOut() {

    currentAllUsers.splice(currentUserIndex,1);
    window.localStorage.setItem('Users', JSON.stringify(currentAllUsers));
    console.log(currentAllUsers);
    window.location.href = './../index.html';

}    
    </script>
</body>
<!-- <a href="./../index.html"></a> -->
</html>